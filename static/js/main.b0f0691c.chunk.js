(this["webpackJsonp@maximedruart/react-sudoku-example"]=this["webpackJsonp@maximedruart/react-sudoku-example"]||[]).push([[0],{18:function(n,e,t){n.exports=t(28)},28:function(n,e,t){"use strict";t.r(e);var r=t(0),c=t.n(r),a=t(13),o=t.n(a),u=t(9),i=t.n(u),l=t(14),f=t(8),s=t(11),d=t(3),b=t(5),p=t(1),h=t(2);function m(){var n=Object(p.a)(["\n  user-select: none;\n  cursor: pointer;\n  width: 100%;\n  height: 100%;\n  font-size: 30px;\n  ",";\n  ",";\n  ",";\n  ",";\n  ",";\n  position: relative;\n\n  .content {\n    width: 100%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n\n  .annotation {\n    position: absolute;\n    top: 10%;\n    left: 10%;\n    font-size: 12px;\n  }\n"]);return m=function(){return n},n}function v(){var n=Object(p.a)(["\n    color: a73434;\n  "]);return v=function(){return n},n}function j(){var n=Object(p.a)(["\n    color: #6767aa;\n  "]);return j=function(){return n},n}function g(){var n=Object(p.a)(["\n    background: #dda4a4;\n  "]);return g=function(){return n},n}function E(){var n=Object(p.a)(["\n    /* background: #c4cad6; */\n    background: #d6d3f0;\n  "]);return E=function(){return n},n}function O(){var n=Object(p.a)(["\n    background: #cee2e9;\n  "]);return O=function(){return n},n}function k(){var n=Object(p.a)(["\n    background: #a9c9d3;\n  "]);return k=function(){return n},n}function y(){var n=Object(p.a)(["\n  * {\n    font-family: sans-serif;\n  }\n  width: 450px;\n\n  .head {\n    padding: 8px 0;\n  }\n\n  .sudoku-table {\n    table-layout: fixed;\n    padding: 0;\n    width: 100%;\n    border-collapse: collapse;\n    border: 3px solid rgb(52, 72, 97);\n    border-spacing: 0;\n    background: white;\n\n    tbody {\n      tr {\n        &:nth-child(3n) {\n          border-bottom: 3px solid rgb(52, 72, 97);\n        }\n        td {\n          padding: 0;\n          margin: 0;\n          height: 50px;\n          width: 50px;\n          border: 2px solid #b9cce4;\n          text-align: center;\n          font-size: 15px;\n\n          &:nth-child(3n) {\n            border-right: 3px solid rgb(52, 72, 97);\n          }\n        }\n      }\n    }\n  }\n\n  .buttons {\n    display: flex;\n    flex-flow: row nowrap;\n    align-items: center;\n    justify-content: space-between;\n    padding: 8px 4px;\n\n    .right {\n      display: flex;\n      flex-flow: row nowrap;\n      align-items: center;\n      justify-content: space-between;\n    }\n  }\n"]);return y=function(){return n},n}for(var x,w,N,L,C,S,A,M,I=new Date,z="".concat(parseInt(I.getDate())<10?"0"+I.getDate():I.getDate(),"-").concat(parseInt(I.getMonth()+1)<10?"0"+I.getMonth()+1:I.getMonth()+1,"-").concat(I.getFullYear()),D=function(n){var e=n.slice(0,2),t=n.slice(3,5),r=n.slice(6);return"".concat(r,"-").concat(t,"-").concat(e)},T=[],_=0;_<3;_++)for(var B=0;B<3;B++){for(var H=[],J=0;J<3;J++)for(var F=0;F<3;F++){var Y=9*(J+3*_)+F+3*B;H.push(Y)}T.push(H)}var q=h.b.div(x||(x=y())),G={focused:Object(h.a)(w||(w=k())),connected:Object(h.a)(N||(N=O())),connectedNumber:Object(h.a)(L||(L=E())),incorrect:Object(h.a)(C||(C=g())),inputtedManually:Object(h.a)(S||(S=j())),inputtedManuallyError:Object(h.a)(A||(A=v()))},K=h.b.div(M||(M=m()),(function(n){return n.state.focused&&G.focused}),(function(n){return n.state.connected&&G.connected}),(function(n){return n.state.connectedNumber&&G.connectedNumber}),(function(n){return n.state.incorrect&&G.incorrect}),(function(n){return!n.state.locked&&G.inputtedManually})),P=function(n){var e=n.children,t=(n.annotation,n.state),r=n.onClickHandler;n.pos;return c.a.createElement(K,{state:t,onClick:r},c.a.createElement("div",{className:"annotation"},t.annotation),c.a.createElement("div",{className:"content"},e))},Q=function(n){var e=n.date,t=Object(r.useState)(!0),a=Object(b.a)(t,2),o=a[0],u=a[1],p=Object(r.useState)(""),h=Object(b.a)(p,2),m=h[0],v=h[1],j=Object(r.useState)(""),g=Object(b.a)(j,2),E=g[0],O=g[1],k=Object(r.useState)(!1),y=Object(b.a)(k,2),x=y[0],w=y[1],N=Object(r.useState)(e||z),L=Object(b.a)(N,2),C=L[0],S=L[1],A=Object(r.useCallback)((function(n,e,t){var r=Object(d.a)(E);if("SELECT_ALL"===n){var c,a=Object(f.a)(r);try{for(a.s();!(c=a.n()).done;){c.value[e]=t}}catch(i){a.e(i)}finally{a.f()}}else if("number"===typeof n)r[n][e]=t;else{var o,u=Object(f.a)(n);try{for(u.s();!(o=u.n()).done;){r[o.value][e]=t}}catch(i){u.e(i)}finally{u.f()}}O(r)}),[E]),M=Object(r.useCallback)((function(n){var e=[];return E.filter((function(n){return null!==n.content})).forEach((function(t,r){return t.content===E[n].content&&e.push(r)})),e}),[E]),I=Object(r.useCallback)((function(){for(var n=[],e=function(e){var t=E.slice(9*e,9*e+9),r=[];t=t.map((function(n,e){return n.content}));var c=new Array(9).fill([]);t.forEach((function(n,t){null!==n&&(c[n-1]=[].concat(Object(d.a)(c[n-1]),[t+9*e]))})),c.forEach((function(n,e){n.length>=2&&r.push(n)})),n.push(r)},t=0;t<9;t++)e(t);for(var r=[],c=function(n){var e=E.filter((function(e,t){return(t-n)%9===0})),t=[];e=e.map((function(n,e){return n.content}));var c=new Array(9).fill([]);e.forEach((function(e,t){null!==e&&(c[e-1]=[].concat(Object(d.a)(c[e-1]),[9*t+n]))})),c.forEach((function(n,e){n.length>=2&&t.push(n)})),r.push(t)},a=0;a<9;a++)c(a);var o,u=[],i=Object(f.a)(T);try{var l=function(){var n=o.value,e=[],t=new Array(9).fill([]);n.forEach((function(n){null!==E[n].content&&(t[E[n].content-1]=[].concat(Object(d.a)(t[E[n].content-1]),[n]))})),t.forEach((function(n){n.length>=2&&e.push(n)})),u.push(e)};for(i.s();!(o=i.n()).done;)l()}catch(s){i.e(s)}finally{i.f()}return Object(d.a)(new Set([n,r,u].flat(3)))}),[E]),_=Object(r.useCallback)((function(n){A("SELECT_ALL","connectedNumber",!1),A("SELECT_ALL","incorrect",!1),A(M(n),"connectedNumber",!0),A(I(),"incorrect",!0)}),[A,I,M]),B=Object(r.useCallback)((function(n){A("SELECT_ALL","focused",!1),A("SELECT_ALL","connected",!1),A(function(n){for(var e=Math.floor(n/9),t=n%9,r=new Array(9).fill("").map((function(n,t){return 9*e+t})),c=new Array(9).fill("").map((function(n,e){return t+9*e})),a=[],o=3*Math.floor(e/3);o<3*Math.floor(e/3)+3;o++)for(var u=3*Math.floor(t/3);u<3*Math.floor(t/3)+3;u++)a.push(9*o+u);var i=Object(d.a)(new Set([r,c,a].flat()));return i=i.filter((function(e){return e!==n}))}(n),"connected",!0),A(n,"focused",!0)}),[A]);return Object(r.useEffect)((function(){(function(){var n=Object(l.a)(i.a.mark((function n(){var e,t,r;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u(!0),v(null),n.prev=2,n.next=5,fetch("".concat("https://papergames-hetic.herokuapp.com/sudoku/").concat(C));case 5:return e=n.sent,console.log(e),n.next=9,e.json();case 9:if(!(t=n.sent).error){n.next=13;break}return v(t.error.toString()),n.abrupt("return",u(!1));case 13:r=t.puzzle.map((function(n){return{content:n,locked:!!n,focused:!1,connected:!1,connectedNumber:!1,incorrect:!1,annotation:""}})),O(r),n.next=21;break;case 17:n.prev=17,n.t0=n.catch(2),console.log(n.t0),v(n.t0.toString());case 21:return n.prev=21,u(!1),n.finish(21);case 24:case"end":return n.stop()}}),n,null,[[2,17,21,24]])})));return function(){return n.apply(this,arguments)}})()()}),[C]),Object(r.useEffect)((function(){var n=function(n){var e=n.key;E.find((function(n){return n.focused}))&&(E.find((function(n){return n.focused})).locked||(!isNaN(parseInt(e))&&0!==parseInt(e)&&A(E.findIndex((function(n){return n.focused})),x?"annotation":"content",parseInt(e)),"Backspace"!==e&&"Delete"!==e||A(E.findIndex((function(n){return n.focused})),x?"annotation":"content",null),!x&&_(E.findIndex((function(n){return n.focused})))))};return window.addEventListener("keydown",n),function(){window.removeEventListener("keydown",n)}}),[A,E,x,B,_]),c.a.createElement(q,null,c.a.createElement("div",{className:"head"},c.a.createElement("span",null,"Sudoku of "),c.a.createElement("input",{type:"date",onChange:function(n){var e=n.target;return S(function(n){var e=n.slice(0,4),t=n.slice(5,7),r=n.slice(8);return"".concat(r,"-").concat(t,"-").concat(e)}(e.value))},value:D(C)})),o?c.a.createElement("div",{className:"loader"},"loading..."):m?c.a.createElement("div",{className:"error"},m):c.a.createElement("table",{className:"sudoku-table"},c.a.createElement("tbody",null,Array(9).fill(null).map((function(n,e){return c.a.createElement("tr",{key:e},Array(9).fill(null).map((function(n,t){return c.a.createElement("td",{key:t},c.a.createElement(P,{state:E[9*e+t],onClickHandler:function(){return B(9*e+t)}},E[9*e+t].content))})))})))),c.a.createElement("div",{className:"buttons"},c.a.createElement("button",{onClick:function(){var n=Object(d.a)(E);n=n.map((function(n){return Object(s.a)(Object(s.a)({},n),{},{content:n.locked?n.content:null,focused:!1,connected:!1,connectedNumber:!1,incorrect:!1,annotation:""})})),O(n)},className:"reset"},"reset"),c.a.createElement("div",{className:"right"},c.a.createElement("div",{className:"label"},"Annotation mode :"),c.a.createElement("input",{onChange:function(n){var e=n.target;return w(e.checked)},type:"checkbox",name:"note"}))))},R=function(){return c.a.createElement(Q,null)};o.a.render(c.a.createElement(R,null),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.b0f0691c.chunk.js.map